var pn=Object.defineProperty;var zt=e=>{throw TypeError(e)};var gn=(e,t,r)=>t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var w=(e,t,r)=>gn(e,typeof t!="symbol"?t+"":t,r),pt=(e,t,r)=>t.has(e)||zt("Cannot "+r);var c=(e,t,r)=>(pt(e,t,"read from private field"),r?r.call(e):t.get(e)),O=(e,t,r)=>t.has(e)?zt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),v=(e,t,r,n)=>(pt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),j=(e,t,r)=>(pt(e,t,"access private method"),r);var Wt=(e,t,r,n)=>({set _(s){v(e,t,s,r)},get _(){return c(e,t,n)}});import{AsyncLocalStorage as mn}from"node:async_hooks";function vn(){const{process:e,Deno:t}=globalThis;return!(typeof(t==null?void 0:t.noColor)=="boolean"?t.noColor:e!==void 0?"NO_COLOR"in(e==null?void 0:e.env):!1)}var St="__COMPOSED_HANDLER",wr=e=>e.length>1,br=e=>e[St]?br(e[St]):e,yn=e=>e.name||(wr(e)?"[middleware]":"[handler]"),En=e=>e.routes.map(({path:t,method:r,handler:n})=>{const s=br(n);return{path:t,method:r,name:yn(s),isMiddleware:wr(s)}}),wn=(e,t)=>{const r=vn(),n={};let s=0,i=0;En(e).filter(({isMiddleware:o})=>!o).map(o=>{const a=`${o.method}-${o.path}`;if((n[a]||(n[a]=[])).push(o),!(n[a].length>1))return s=Math.max(s,o.method.length),i=Math.max(i,o.path.length),{method:o.method,path:o.path,routes:n[a]}}).forEach(o=>{if(!o)return;const{method:a,path:l,routes:f}=o,u=r?`\x1B[32m${a}\x1B[0m`:a;console.log(`${u} ${" ".repeat(s-a.length)} ${l}`)})},_r={Stringify:1},H=(e,t)=>{const r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},bn=/[&<>'"]/,xr=async(e,t)=>{let r="";t||(t=[]);const n=await Promise.all(e);for(let s=n.length-1;r+=n[s],s--,!(s<0);s--){let i=n[s];typeof i=="object"&&t.push(...i.callbacks||[]);const o=i.isEscaped;if(i=await(typeof i=="object"?i.toString():i),typeof i=="object"&&t.push(...i.callbacks||[]),i.isEscaped??o)r+=i;else{const a=[r];ue(i,a),r=a[0]}}return H(r,t)},ue=(e,t)=>{const r=e.search(bn);if(r===-1){t[0]+=e;return}let n,s,i=0;for(s=r;s<e.length;s++){switch(e.charCodeAt(s)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}t[0]+=e.substring(i,s)+n,i=s+1}t[0]+=e.substring(i,s)},Or=e=>{const t=e.callbacks;if(!(t!=null&&t.length))return e;const r=[e],n={};return t.forEach(s=>s({phase:_r.Stringify,buffer:r,context:n})),r[0]},Rr=async(e,t,r,n,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const i=e.callbacks;return i!=null&&i.length?(s?s[0]+=e:s=[e],Promise.all(i.map(a=>a({phase:t,buffer:s,context:n}))).then(a=>Promise.all(a.filter(Boolean).map(l=>Rr(l,t,!1,n,s))).then(()=>s[0]))):Promise.resolve(e)},_n=(e,...t)=>{const r=[""];for(let n=0,s=e.length-1;n<s;n++){r[0]+=e[n];const i=Array.isArray(t[n])?t[n].flat(1/0):[t[n]];for(let o=0,a=i.length;o<a;o++){const l=i[o];if(typeof l=="string")ue(l,r);else if(typeof l=="number")r[0]+=l;else{if(typeof l=="boolean"||l===null||l===void 0)continue;if(typeof l=="object"&&l.isEscaped)if(l.callbacks)r.unshift("",l);else{const f=l.toString();f instanceof Promise?r.unshift("",f):r[0]+=f}else l instanceof Promise?r.unshift("",l):ue(l.toString(),r)}}}return r[0]+=e.at(-1),r.length===1?"callbacks"in r?H(Or(H(r[0],r.callbacks))):H(r[0]):xr(r,r.callbacks)},Lt=Symbol("RENDERER"),Pt=Symbol("ERROR_HANDLER"),A=Symbol("STASH"),jr=Symbol("INTERNAL"),xn=Symbol("MEMO"),ft=Symbol("PERMALINK"),qt=e=>(e[jr]=!0,e),Sr=e=>({value:t,children:r})=>{if(!r)return;const n={children:[{tag:qt(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?n.children.push(...r.flat()):n.children.push(r),n.children.push({tag:qt(()=>{e.pop()}),props:{}});const s={tag:"",props:n,type:""};return s[Pt]=i=>{throw e.pop(),i},s},Pr=e=>{const t=[e],r=Sr(t);return r.values=t,r.Provider=r,Ce.push(r),r},Ce=[],It=e=>{const t=[e],r=n=>{t.push(n.value);let s;try{s=n.children?(Array.isArray(n.children)?new Tr("",{},n.children):n.children).toString():""}finally{t.pop()}return s instanceof Promise?s.then(i=>H(i,i.callbacks)):H(s)};return r.values=t,r.Provider=r,r[Lt]=Sr(t),Ce.push(r),r},xe=e=>e.values.at(-1),tt={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},At={},rt="data-precedence",Ge=e=>Array.isArray(e)?e:[e],Kt=new WeakMap,Xt=(e,t,r,n)=>({buffer:s,context:i})=>{if(!s)return;const o=Kt.get(i)||{};Kt.set(i,o);const a=o[e]||(o[e]=[]);let l=!1;const f=tt[e];if(f.length>0){e:for(const[,u]of a)for(const p of f)if(((u==null?void 0:u[p])??null)===(r==null?void 0:r[p])){l=!0;break e}}if(l?s[0]=s[0].replaceAll(t,""):f.length>0?a.push([t,r,n]):a.unshift([t,r,n]),s[0].indexOf("</head>")!==-1){let u;if(n===void 0)u=a.map(([p])=>p);else{const p=[];u=a.map(([d,,m])=>{let b=p.indexOf(m);return b===-1&&(p.push(m),b=p.length-1),[d,b]}).sort((d,m)=>d[1]-m[1]).map(([d])=>d)}u.forEach(p=>{s[0]=s[0].replaceAll(p,"")}),s[0]=s[0].replace(/(?=<\/head>)/,u.join(""))}},Je=(e,t,r)=>H(new q(e,r,Ge(t??[])).toString()),Ze=(e,t,r,n)=>{if("itemProp"in r)return Je(e,t,r);let{precedence:s,blocking:i,...o}=r;s=n?s??"":void 0,n&&(o[rt]=s);const a=new q(e,o,Ge(t||[])).toString();return a instanceof Promise?a.then(l=>H(a,[...l.callbacks||[],Xt(e,l,o,s)])):H(a,[Xt(e,a,o,s)])},On=({children:e,...t})=>{const r=Ht();if(r){const n=xe(r);if(n==="svg"||n==="head")return new q("title",t,Ge(e??[]))}return Ze("title",e,t,!1)},Rn=({children:e,...t})=>{const r=Ht();return["src","async"].some(n=>!t[n])||r&&xe(r)==="head"?Je("script",e,t):Ze("script",e,t,!1)},jn=({children:e,...t})=>["href","precedence"].every(r=>r in t)?(t["data-href"]=t.href,delete t.href,Ze("style",e,t,!0)):Je("style",e,t),Sn=({children:e,...t})=>["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?Je("link",e,t):Ze("link",e,t,"precedence"in t),Pn=({children:e,...t})=>{const r=Ht();return r&&xe(r)==="head"?Je("meta",e,t):Ze("meta",e,t,!1)},Ar=(e,{children:t,...r})=>new q(e,r,Ge(t??[])),An=e=>(typeof e.action=="function"&&(e.action=ft in e.action?e.action[ft]:void 0),Ar("form",e)),kr=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=ft in t.formAction?t.formAction[ft]:void 0),Ar(e,t)),kn=e=>kr("input",e),Cn=e=>kr("button",e);const gt=Object.freeze(Object.defineProperty({__proto__:null,button:Cn,form:An,input:kn,link:Sn,meta:Pn,script:Rn,style:jn,title:On},Symbol.toStringTag,{value:"Module"}));var Tn=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),ut=e=>Tn.get(e)||e,Cr=(e,t)=>{for(const[r,n]of Object.entries(e)){const s=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`);t(s,n==null?null:typeof n=="number"?s.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${n}`:`${n}px`:n)}},Fe=void 0,Ht=()=>Fe,Nn=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,$n=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Mn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Ft=(e,t)=>{for(let r=0,n=e.length;r<n;r++){const s=e[r];if(typeof s=="string")ue(s,t);else{if(typeof s=="boolean"||s===null||s===void 0)continue;s instanceof q?s.toStringToBuffer(t):typeof s=="number"||s.isEscaped?t[0]+=s:s instanceof Promise?t.unshift("",s):Ft(s,t)}}},q=class{constructor(e,t,r){w(this,"tag");w(this,"props");w(this,"key");w(this,"children");w(this,"isEscaped",!0);w(this,"localContexts");this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var t,r;const e=[""];(t=this.localContexts)==null||t.forEach(([n,s])=>{n.values.push(s)});try{this.toStringToBuffer(e)}finally{(r=this.localContexts)==null||r.forEach(([n])=>{n.values.pop()})}return e.length===1?"callbacks"in e?Or(H(e[0],e.callbacks)).toString():e[0]:xr(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,r=this.props;let{children:n}=this;e[0]+=`<${t}`;const s=Fe&&xe(Fe)==="svg"?i=>Nn(ut(i)):i=>ut(i);for(let[i,o]of Object.entries(r))if(i=s(i),i!=="children"){if(i==="style"&&typeof o=="object"){let a="";Cr(o,(l,f)=>{f!=null&&(a+=`${a?";":""}${l}:${f}`)}),e[0]+=' style="',ue(a,e),e[0]+='"'}else if(typeof o=="string")e[0]+=` ${i}="`,ue(o,e),e[0]+='"';else if(o!=null)if(typeof o=="number"||o.isEscaped)e[0]+=` ${i}="${o}"`;else if(typeof o=="boolean"&&Mn.includes(i))o&&(e[0]+=` ${i}=""`);else if(i==="dangerouslySetInnerHTML"){if(n.length>0)throw"Can only set one of `children` or `props.dangerouslySetInnerHTML`.";n=[H(o.__html)]}else if(o instanceof Promise)e[0]+=` ${i}="`,e.unshift('"',o);else if(typeof o=="function"){if(!i.startsWith("on"))throw`Invalid prop '${i}' of type 'function' supplied to '${t}'.`}else e[0]+=` ${i}="`,ue(o.toString(),e),e[0]+='"'}if($n.includes(t)&&n.length===0){e[0]+="/>";return}e[0]+=">",Ft(n,e),e[0]+=`</${t}>`}},mt=class extends q{toStringToBuffer(e){const{children:t}=this,r=this.tag.call(null,{...this.props,children:t.length<=1?t[0]:t});if(!(typeof r=="boolean"||r==null))if(r instanceof Promise)if(Ce.length===0)e.unshift("",r);else{const n=Ce.map(s=>[s,s.values.at(-1)]);e.unshift("",r.then(s=>(s instanceof q&&(s.localContexts=n),s)))}else r instanceof q?r.toStringToBuffer(e):typeof r=="number"||r.isEscaped?(e[0]+=r,r.callbacks&&(e.callbacks||(e.callbacks=[]),e.callbacks.push(...r.callbacks))):ue(r,e)}},Tr=class extends q{toStringToBuffer(e){Ft(this.children,e)}},kt=(e,t,...r)=>{t??(t={}),r.length&&(t.children=r.length===1?r[0]:r);const n=t.key;delete t.key;const s=nt(e,t,r);return s.key=n,s},Vt=!1,nt=(e,t,r)=>{if(!Vt){for(const n in At)gt[n][Lt]=At[n];Vt=!0}return typeof e=="function"?new mt(e,t,r):gt[e]?new mt(gt[e],t,r):e==="svg"||e==="head"?(Fe||(Fe=It("")),new q(e,t,[new mt(Fe,{value:e},r)])):new q(e,t,r)},$e=({children:e})=>new Tr("",{children:e},Array.isArray(e)?e:e?[e]:[]),Dn=e=>!!(e&&typeof e=="object"&&"tag"in e&&"props"in e);function h(e,t,r){let n;if(!t||!("children"in t))n=nt(e,t,[]);else{const s=t.children;n=Array.isArray(s)?nt(e,t,s):nt(e,t,[s])}return n.key=r,n}var Be="_hp",Ln={Change:"Input",DoubleClick:"DblClick"},In={svg:"2000/svg",math:"1998/Math/MathML"},Ue=[],Ct=new WeakMap,Te=void 0,Hn=()=>Te,G=e=>"t"in e,vt={onClick:["click",!1]},Gt=e=>{if(!e.startsWith("on"))return;if(vt[e])return vt[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,r,n]=t;return vt[e]=[(Ln[r]||r).toLowerCase(),!!n]}},Jt=(e,t)=>Te&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Fn=(e,t,r)=>{var n;t||(t={});for(let s in t){const i=t[s];if(s!=="children"&&(!r||r[s]!==i)){s=ut(s);const o=Gt(s);if(o){if((r==null?void 0:r[s])!==i&&(r&&e.removeEventListener(o[0],r[s],o[1]),i!=null)){if(typeof i!="function")throw new Error(`Event handler for "${s}" is not a function`);e.addEventListener(o[0],i,o[1])}}else if(s==="dangerouslySetInnerHTML"&&i)e.innerHTML=i.__html;else if(s==="ref"){let a;typeof i=="function"?a=i(e)||(()=>i(null)):i&&"current"in i&&(i.current=e,a=()=>i.current=null),Ct.set(e,a)}else if(s==="style"){const a=e.style;typeof i=="string"?a.cssText=i:(a.cssText="",i!=null&&Cr(i,a.setProperty.bind(a)))}else{if(s==="value"){const l=e.nodeName;if(l==="INPUT"||l==="TEXTAREA"||l==="SELECT"){if(e.value=i==null||i===!1?null:i,l==="TEXTAREA"){e.textContent=i;continue}else if(l==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(s==="checked"&&e.nodeName==="INPUT"||s==="selected"&&e.nodeName==="OPTION")&&(e[s]=i);const a=Jt(e,s);i==null||i===!1?e.removeAttribute(a):i===!0?e.setAttribute(a,""):typeof i=="string"||typeof i=="number"?e.setAttribute(a,i):e.setAttribute(a,i.toString())}}}if(r)for(let s in r){const i=r[s];if(s!=="children"&&!(s in t)){s=ut(s);const o=Gt(s);o?e.removeEventListener(o[0],i,o[1]):s==="ref"?(n=Ct.get(e))==null||n():e.removeAttribute(Jt(e,s))}}},Bn=(e,t)=>{t[A][0]=0,Ue.push([e,t]);const r=t.tag[Lt]||t.tag,n=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,n)]}finally{Ue.pop()}},Nr=(e,t,r,n,s)=>{var i,o;(i=e.vR)!=null&&i.length&&(n.push(...e.vR),delete e.vR),typeof e.tag=="function"&&((o=e[A][1][Lr])==null||o.forEach(a=>s.push(a))),e.vC.forEach(a=>{var l;if(G(a))r.push(a);else if(typeof a.tag=="function"||a.tag===""){a.c=t;const f=r.length;if(Nr(a,t,r,n,s),a.s){for(let u=f;u<r.length;u++)r[u].s=!0;a.s=!1}}else r.push(a),(l=a.vR)!=null&&l.length&&(n.push(...a.vR),delete a.vR)})},Un=e=>{for(;;e=e.tag===Be||!e.vC||!e.pP?e.nN:e.vC[0]){if(!e)return null;if(e.tag!==Be&&e.e)return e.e}},$r=e=>{var t,r,n,s,i,o;G(e)||((r=(t=e[A])==null?void 0:t[1][Lr])==null||r.forEach(a=>{var l;return(l=a[2])==null?void 0:l.call(a)}),(n=Ct.get(e.e))==null||n(),e.p===2&&((s=e.vC)==null||s.forEach(a=>a.p=2)),(i=e.vC)==null||i.forEach($r)),e.p||((o=e.e)==null||o.remove(),delete e.e),typeof e.tag=="function"&&(De.delete(e),st.delete(e),delete e[A][3],e.a=!0)},Mr=(e,t,r)=>{e.c=t,Dr(e,t,r)},Zt=(e,t)=>{if(t){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}},Qt=Symbol(),Dr=(e,t,r)=>{var f;const n=[],s=[],i=[];Nr(e,t,n,s,i),s.forEach($r);const o=r?void 0:t.childNodes;let a,l=null;if(r)a=-1;else if(!o.length)a=0;else{const u=Zt(o,Un(e.nN));u!==void 0?(l=o[u],a=u):a=Zt(o,(f=n.find(p=>p.tag!==Be&&p.e))==null?void 0:f.e)??-1,a===-1&&(r=!0)}for(let u=0,p=n.length;u<p;u++,a++){const d=n[u];let m;if(d.s&&d.e)m=d.e,d.s=!1;else{const b=r||!d.e;G(d)?(d.e&&d.d&&(d.e.textContent=d.t),d.d=!1,m=d.e||(d.e=document.createTextNode(d.t))):(m=d.e||(d.e=d.n?document.createElementNS(d.n,d.tag):document.createElement(d.tag)),Fn(m,d.props,d.pP),Dr(d,m,b))}d.tag===Be?a--:r?m.parentNode||t.appendChild(m):o[a]!==m&&o[a-1]!==m&&(o[a+1]===m?t.appendChild(o[a]):t.insertBefore(m,l||o[a]||null))}if(e.pP&&delete e.pP,i.length){const u=[],p=[];i.forEach(([,d,,m,b])=>{d&&u.push(d),m&&p.push(m),b==null||b()}),u.forEach(d=>d()),p.length&&requestAnimationFrame(()=>{p.forEach(d=>d())})}},zn=(e,t)=>!!(e&&e.length===t.length&&e.every((r,n)=>r[1]===t[n][1])),st=new WeakMap,Tt=(e,t,r)=>{var i,o,a,l,f,u;const n=!r&&t.pC;r&&(t.pC||(t.pC=t.vC));let s;try{r||(r=typeof t.tag=="function"?Bn(e,t):Ge(t.props.children)),((i=r[0])==null?void 0:i.tag)===""&&r[0][Pt]&&(s=r[0][Pt],e[5].push([e,s,t]));const p=n?[...t.pC]:t.vC?[...t.vC]:void 0,d=[];let m;for(let b=0;b<r.length;b++){Array.isArray(r[b])&&r.splice(b,1,...r[b].flat());let g=Wn(r[b]);if(g){typeof g.tag=="function"&&!g.tag[jr]&&(Ce.length>0&&(g[A][2]=Ce.map(E=>[E,E.values.at(-1)])),(o=e[5])!=null&&o.length&&(g[A][3]=e[5].at(-1)));let y;if(p&&p.length){const E=p.findIndex(G(g)?_=>G(_):g.key!==void 0?_=>_.key===g.key&&_.tag===g.tag:_=>_.tag===g.tag);E!==-1&&(y=p[E],p.splice(E,1))}if(y)if(G(g))y.t!==g.t&&(y.t=g.t,y.d=!0),g=y;else{const E=y.pP=y.props;if(y.props=g.props,y.f||(y.f=g.f||t.f),typeof g.tag=="function"){const _=y[A][2];y[A][2]=g[A][2]||[],y[A][3]=g[A][3],!y.f&&((y.o||y)===g.o||(l=(a=y.tag)[xn])!=null&&l.call(a,E,y.props))&&zn(_,y[A][2])&&(y.s=!0)}g=y}else if(!G(g)&&Te){const E=xe(Te);E&&(g.n=E)}if(!G(g)&&!g.s&&(Tt(e,g),delete g.f),d.push(g),m&&!m.s&&!g.s)for(let E=m;E&&!G(E);E=(f=E.vC)==null?void 0:f.at(-1))E.nN=g;m=g}}t.vR=n?[...t.vC,...p||[]]:p||[],t.vC=d,n&&delete t.pC}catch(p){if(t.f=!0,p===Qt){if(s)return;throw p}const[d,m,b]=((u=t[A])==null?void 0:u[3])||[];if(m){const g=()=>it([0,!1,e[2]],b),y=st.get(b)||[];y.push(g),st.set(b,y);const E=m(p,()=>{const _=st.get(b);if(_){const x=_.indexOf(g);if(x!==-1)return _.splice(x,1),g()}});if(E){if(e[0]===1)e[1]=!0;else if(Tt(e,b,[E]),(m.length===1||e!==d)&&b.c){Mr(b,b.c,!1);return}throw Qt}}throw p}finally{s&&e[5].pop()}},Wn=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[A]=[0,[]];else{const t=In[e.tag];t&&(Te||(Te=Pr("")),e.props.children=[{tag:Te,props:{value:e.n=`http://www.w3.org/${t}`,children:e.props.children}}])}return e}},Yt=(e,t)=>{var r,n;(r=t[A][2])==null||r.forEach(([s,i])=>{s.values.push(i)});try{Tt(e,t,void 0)}catch{return}if(t.a){delete t.a;return}(n=t[A][2])==null||n.forEach(([s])=>{s.values.pop()}),(e[0]!==1||!e[1])&&Mr(t,t.c,!1)},De=new WeakMap,er=[],it=async(e,t)=>{e[5]||(e[5]=[]);const r=De.get(t);r&&r[0](void 0);let n;const s=new Promise(i=>n=i);if(De.set(t,[n,()=>{e[2]?e[2](e,t,i=>{Yt(i,t)}).then(()=>n(t)):(Yt(e,t),n(t))}]),er.length)er.at(-1).add(t);else{await Promise.resolve();const i=De.get(t);i&&(De.delete(t),i[1]())}return s},qn=(e,t,r)=>({tag:Be,props:{children:e},key:r,e:t,p:1}),yt=0,Lr=1,Et=2,wt=3,bt=new WeakMap,Ir=(e,t)=>!e||!t||e.length!==t.length||t.some((r,n)=>r!==e[n]),Kn=void 0,tr=[],Xn=e=>{var o;const t=()=>typeof e=="function"?e():e,r=Ue.at(-1);if(!r)return[t(),()=>{}];const[,n]=r,s=(o=n[A][1])[yt]||(o[yt]=[]),i=n[A][0]++;return s[i]||(s[i]=[t(),a=>{const l=Kn,f=s[i];if(typeof a=="function"&&(a=a(f[0])),!Object.is(a,f[0]))if(f[0]=a,tr.length){const[u,p]=tr.at(-1);Promise.all([u===3?n:it([u,!1,l],n),p]).then(([d])=>{if(!d||!(u===2||u===3))return;const m=d.vC;requestAnimationFrame(()=>{setTimeout(()=>{m===d.vC&&it([u===3?1:0,!1,l],d)})})})}else it([0,!1,l],n)}])},Bt=(e,t)=>{var a;const r=Ue.at(-1);if(!r)return e;const[,n]=r,s=(a=n[A][1])[Et]||(a[Et]=[]),i=n[A][0]++,o=s[i];return Ir(o==null?void 0:o[1],t)?s[i]=[e,t]:e=s[i][0],e},Vn=e=>{const t=bt.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>bt.set(e,[r]),r=>bt.set(e,[void 0,r])),e},Gn=(e,t)=>{var a;const r=Ue.at(-1);if(!r)return e();const[,n]=r,s=(a=n[A][1])[wt]||(a[wt]=[]),i=n[A][0]++,o=s[i];return Ir(o==null?void 0:o[1],t)&&(s[i]=[e(),t]),s[i][0]},Jn=Pr({pending:!1,data:null,method:null,action:null}),rr=new Set,Zn=e=>{rr.add(e),e.finally(()=>rr.delete(e))},Ut=(e,t)=>Gn(()=>r=>{let n;e&&(typeof e=="function"?n=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,n=()=>{e.current=null}));const s=t(r);return()=>{s==null||s(),n==null||n()}},[e]),Oe=Object.create(null),Ye=Object.create(null),Qe=(e,t,r,n,s)=>{if(t!=null&&t.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const i=document.head;let{onLoad:o,onError:a,precedence:l,blocking:f,...u}=t,p=null,d=!1;const m=tt[e];let b;if(m.length>0){const _=i.querySelectorAll(e);e:for(const x of _)for(const R of tt[e])if(x.getAttribute(R)===t[R]){p=x;break e}if(!p){const x=m.reduce((R,S)=>t[S]===void 0?R:`${R}-${S}-${t[S]}`,e);d=!Ye[x],p=Ye[x]||(Ye[x]=(()=>{const R=document.createElement(e);for(const S of m)t[S]!==void 0&&R.setAttribute(S,t[S]),t.rel&&R.setAttribute("rel",t.rel);return R})())}}else b=i.querySelectorAll(e);l=n?l??"":void 0,n&&(u[rt]=l);const g=Bt(_=>{if(m.length>0){let x=!1;for(const R of i.querySelectorAll(e)){if(x&&R.getAttribute(rt)!==l){i.insertBefore(_,R);return}R.getAttribute(rt)===l&&(x=!0)}i.appendChild(_)}else if(b){let x=!1;for(const R of b)if(R===_){x=!0;break}x||i.insertBefore(_,i.contains(b[0])?b[0]:i.querySelector(e)),b=void 0}},[l]),y=Ut(t.ref,_=>{var S;const x=m[0];if(r===2&&(_.innerHTML=""),(d||b)&&g(_),!a&&!o)return;let R=Oe[S=_.getAttribute(x)]||(Oe[S]=new Promise((F,X)=>{_.addEventListener("load",F),_.addEventListener("error",X)}));o&&(R=R.then(o)),a&&(R=R.catch(a)),R.catch(()=>{})});if(s&&f==="render"){const _=tt[e][0];if(t[_]){const x=t[_],R=Oe[x]||(Oe[x]=new Promise((S,F)=>{g(p),p.addEventListener("load",S),p.addEventListener("error",F)}));Vn(R)}}const E={tag:e,type:e,props:{...u,ref:y},ref:y};return E.p=r,p&&(E.e=p),qn(E,i)},Qn=e=>{const t=Hn(),r=t&&xe(t);return r!=null&&r.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:Qe("title",e,void 0,!1,!1)},Yn=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:Qe("script",e,1,!1,!0),es=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,Qe("style",e,2,!0,!0)),ts=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:Qe("link",e,1,"precedence"in e,!0),rs=e=>Qe("meta",e,void 0,!1,!1),Hr=Symbol(),ns=e=>{const{action:t,...r}=e;typeof t!="function"&&(r.action=t);const[n,s]=Xn([null,!1]),i=Bt(async f=>{const u=f.isTrusted?t:f.detail[Hr];if(typeof u!="function")return;f.preventDefault();const p=new FormData(f.target);s([p,!0]);const d=u(p);d instanceof Promise&&(Zn(d),await d),s([null,!0])},[]),o=Ut(e.ref,f=>(f.addEventListener("submit",i),()=>{f.removeEventListener("submit",i)})),[a,l]=n;return n[1]=!1,{tag:Jn,props:{value:{pending:a!==null,data:a,method:a?"post":null,action:a?t:null},children:{tag:"form",props:{...r,ref:o},type:"form",ref:o}},f:l}},Fr=(e,{formAction:t,...r})=>{if(typeof t=="function"){const n=Bt(s=>{s.preventDefault(),s.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[Hr]:t}}))},[]);r.ref=Ut(r.ref,s=>(s.addEventListener("click",n),()=>{s.removeEventListener("click",n)}))}return{tag:e,props:r,type:e,ref:r.ref}},ss=e=>Fr("input",e),is=e=>Fr("button",e);Object.assign(At,{title:Qn,script:Yn,style:es,link:ts,meta:rs,form:ns,input:ss,button:is});new TextEncoder;var os=It(null),as=(e,t,r,n)=>(s,i)=>{const o="<!DOCTYPE html>",a=r?kt(f=>r(f,e),{Layout:t,...i},s):s,l=_n`${H(o)}${kt(os.Provider,{value:e},a)}`;return e.html(l)},Br=(e,t)=>function(n,s){const i=n.getLayout()??$e;return e&&n.setLayout(o=>e({...o,Layout:i},n)),n.setRenderer(as(n,i,e)),s()};const _t={X:"https://twitter.com/3kz_z5ol",GITHUB:"https://github.com/3kz2501",TWITCH:"https://www.twitch.tv/3kz_z5ol"},ls=Br(({children:e,title:t,description:r})=>{const n=t??"3kz Blog";return h("html",{lang:"en",children:[h("head",{children:[h("meta",{charset:"utf-8"}),h("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),h("title",{children:n}),h("meta",{property:"og:title",content:n}),h("meta",{property:"og:description",content:r??"3kz Blog: いろいろ書き残し"}),h("meta",{property:"og:image",content:"/static/profile-image.png"}),h(di,{src:"/app/client.ts"}),h("link",{href:"/static/assets/style.css",rel:"stylesheet"}),h("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.css"}),h("link",{rel:"preload",href:"/fonts/PleckJP/PleckJP.woff2",as:"font",type:"font/woff2",crossorigin:!0}),h("style",{children:`
            body {
              font-family: 'PleckJP', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            }
          `})]}),h("body",{class:"main-container",children:[h("header",{class:"bg-black border-b border-jade-dark",children:h("div",{class:"max-w-screen-2xl mx-auto flex h-14 items-center px-6",children:[h("div",{class:"w-1/3"}),h("div",{class:"w-1/3 flex justify-center",children:h("a",{href:"/",class:"text-jade font-bold",children:"3kz Blog"})}),h("div",{class:"flex items-center gap-3 w-1/3 justify-end",children:[h("a",{href:_t.X,target:"_blank",rel:"noreferrer",class:"p-1",children:h("img",{src:"/static/twitter-alt.svg",alt:"x-icon",class:"w-6 h-6"})}),h("a",{href:_t.GITHUB,target:"_blank",rel:"noreferrer",class:"p-1",children:h("img",{src:"/static/github.svg",alt:"github-icon",class:"w-6 h-6"})}),h("a",{href:_t.TWITCH,target:"_blank",rel:"noreferrer",class:"p-1",children:h("img",{src:"/static/twitch.svg",alt:"twitch-icon",class:"w-6 h-6"})})]})]})}),h("main",{class:"w-full px-4 lg:max-w-4xl lg:px-0 mx-auto",children:e}),h("footer",{class:"mt-10 text-center py-4 border-t border-jade-dark",children:h("p",{children:"© 2025 3kz blog. All rights reserved."})})]})]})}),cs=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"})),fs="component-name",us="component-export",hs="data-serialized-props",ds="data-hono-template",he="__importing_islands",Nt=Symbol(),$t=Symbol(),xt=It({[Nt]:!1,[$t]:!1}),Ur=e=>Array.isArray(e)?e.some(Ur):typeof e=="object"&&Dn(e),ps=({componentName:e,componentExport:t,Component:r,props:n})=>{const s={},i={};for(const a in n){const l=n[a];Ur(l)?s[a]=l:i[a]=l}const o=xe(xt);return o[$t]||!o[Nt]?h("honox-island",{[fs]:e,[us]:t||void 0,[hs]:JSON.stringify(i),children:[h(xt.Provider,{value:{...o,[Nt]:!0},children:h(r,{...n})}),Object.entries(s).map(([a,l])=>kt("template",{[ds]:a,key:a},h(xt.Provider,{value:{...o,[$t]:!0},children:l})))]}):h(r,{...n})},gs=({title:e})=>typeof window>"u"?h("div",{class:"flex items-center justify-center mt-10 gap-3",children:h("div",{role:"status",class:"max-w-sm animate-pulse w-full",children:h("div",{class:"h-11 bg-gray-800 rounded-3xl w-full"})})}):h("div",{class:"flex items-center justify-center mt-10 gap-3",children:h("a",{href:`https://twitter.com/share?text=${encodeURI(e)}&url=${window.location.href}`,target:"_blank",rel:"noreferrer",class:"bg-[#0f1419] text-jade-light flex items-center text-sm rounded-3xl py-3 px-4 border border-jade-dark",children:[h("img",{src:"/static/twitter-alt.svg",alt:"xにシェアする",class:"w-4 h-4 mr-1"}),"Post"]})}),ms=function(e){return h(ps,{componentName:"/app/islands/ShareButton.tsx",Component:gs,props:e})},V=({url:e,img:t,title:r,children:n})=>h("div",{className:"card my-6 border border-jade-dark rounded-lg overflow-hidden bg-black",children:h("div",{className:"flex flex-col md:flex-row",children:[h("div",{className:"md:w-1/3 p-4",children:h("a",{href:e,target:"_blank",rel:"noreferrer",children:h("img",{src:t,alt:r,className:"w-full h-auto object-cover rounded-md"})})}),h("div",{className:"md:w-2/3 p-4",children:[h("a",{href:e,target:"_blank",rel:"noreferrer",className:"text-jade-light text-xl font-bold underline mb-2 block",children:r}),h("div",{className:"text-jade mt-2",children:n})]})]})}),vs=Br(({children:e,Layout:t,frontmatter:r})=>{const n=`${r==null?void 0:r.title} | 3kz Blog`;return h(t,{title:n,description:r==null?void 0:r.description,children:[h("div",{class:"markdown",children:typeof e=="function"?e({components:{Card:V}}):e}),h(ms,{title:n})]})}),ys=!0,Es=Object.freeze(Object.defineProperty({__proto__:null,__importing_islands:ys,default:vs},Symbol.toStringTag,{value:"Module"})),ws={title:"今年中に読んでおきたい本",description:"books",date:"2023/09/25",published:!0};function nr(e){const t={h2:"h2",li:"li",p:"p",ul:"ul",...e.components};return h($e,{children:[h(t.h2,{children:"目的"}),`
`,h(t.ul,{children:[`
`,h(t.li,{children:"今年中に手を出しておきたい本をメモ代わりに載せる"}),`
`]}),`
`,h(t.h2,{children:"リスト"}),`
`,h(V,{url:"https://www.lambdanote.com/collections/ir-system/products/ir-system",img:"https://www.lambdanote.com/cdn/shop/products/book-1_5db44c4f-fb10-49e4-bf40-70317da3ca4b_530x.png",title:"検索システム ― 実務者のための開発改善ガイドブック",children:h(t.p,{children:"検索システムに関して全く興味なかったけど結構使い所とか多く,知識としてほしくなったため読んでみたい. またクエリ毎にLN で課金するシンプルでフラットな検索エンジンを作れないかと考えているため読んでみたい"})}),`
`,h(V,{url:"https://www.amazon.co.jp/dp/B00NUZ32MU/?coliid=I30NC6M46RY93A&colid=3TUQQS7SAZHPR&psc=0&ref_=list_c_wl_lv_ov_lig_dp_it",img:"https://m.media-amazon.com/images/I/71K8AyAJbiL._SL1500_.jpg",title:"検索エンジン自作入門～手を動かしながら見渡す検索の舞台裏",children:h(t.p,{children:"こちらも検索系. エンジン自体を手を動かしながら学べるらしい. 1. 読んでからのほうがいい気もしている"})}),`
`,h(V,{url:"https://www.lambdanote.com/collections/cpu/products/cpu",img:"https://www.lambdanote.com/cdn/shop/products/blog-cover_530x.png?v=1674602946",title:"プログラマーのためのCPU入門 ― CPUは如何にしてソフトウェアを高速に実行するか",children:h(t.p,{children:"CPU 本とかコンピュータアーキの本は多いけどハードウェアの話がメイン?というかそちらにも手を出す人向けなのが多い印象でよみたいけどハードル高そうだなって感じててよんでなかったけどこれならソフトウェア文脈で読めそうなので気になっている"})}),`
`,h(t.p,{children:"こっから先は積んでるやつ"}),`
`,h(V,{url:"https://www.amazon.co.jp/gp/product/4798110663/ref=ppx_yo_dt_b_asin_image_o00_s00?ie=UTF8&psc=1",img:"https://m.media-amazon.com/images/I/71W9vZMHn+L._SL1500_.jpg",title:"楽々ERDレッスン ",children:h(t.p,{children:"DB のテーブル設計をしっかりと勉強したいなぁと思っていたところ副業先で教えてもらった本.なかなかいいらしい.難点は物理本しか存在してないのでKindle とか電子で持てないところ..."})}),`
`,h(V,{url:"https://www.oreilly.co.jp/books/9784814400140/",img:"https://www.oreilly.co.jp/books/images/picture_large978-4-8144-0014-0.jpeg",title:"マスタリング・ライトニングネットワーク",children:h(t.p,{children:"ライトニングネットワークの唯一まともそうな本. 一回読んでるけど理解しきれてないので再度読みたい."})}),`
`,h(V,{url:"https://www.oreilly.co.jp/books/9784873119083/",img:"https://www.oreilly.co.jp/books/images/picture_large978-4-87311-908-3.jpeg",title:"詳解 ビットコイン",children:h(t.p,{children:"マスタリングビットコインより読みやすいような読みにくいような.. どっちでもいいけど詳細を知るにはいい本なのでもう一度読んでおきたい."})}),`
`,h(V,{url:"https://www.oreilly.co.jp/books/9784873119021/",img:"https://www.oreilly.co.jp/books/images/picture_large978-4-87311-902-1.jpeg",title:"プログラミング･ビットコイン",children:h(t.p,{children:"Python でビットコインの実装を追う本. 個人的にはこれをRust で実装し直ししようとして一回挫折しているが,再度試してみたい. Rust だけであればrust-bitcoin の実装がすでにあるが自分でやるのが一番学習に向いてそうなのでいつかやりたい..(いつか)"})}),`
`,h(V,{url:"https://www.amazon.co.jp/%E8%82%A9%E3%82%92%E3%81%99%E3%81%8F%E3%82%81%E3%82%8B%E3%82%A2%E3%83%88%E3%83%A9%E3%82%B9-%E7%AC%AC%E4%B8%80%E9%83%A8-%E3%82%A2%E3%82%A4%E3%83%B3%E3%83%BB%E3%83%A9%E3%83%B3%E3%83%89/dp/4908222010/ref=sr_1_1?crid=9A0BDGUBNWFJ&keywords=%E8%82%A9%E3%82%92%E3%81%99%E3%81%8F%E3%82%81%E3%82%8B%E3%82%A2%E3%83%88%E3%83%A9%E3%82%B9&qid=1695650136&s=books&sprefix=%E3%81%8B%E3%81%9F%E3%82%92%2Cstripbooks%2C153&sr=1-1",img:"https://m.media-amazon.com/images/I/61PDwjDV0WL._SL1257_.jpg",title:"肩をすくめるアトラス",children:h(t.p,{children:"ビットコイナーなら読んどけって言われているから読んでいるがとにかく分厚いし文字数も鬼. マージンとか全く取ってないレイアウト.更に三部作.. こちらも物理本しかないのが難点"})}),`
`,h(t.p,{children:"最後だけ小説で技術本じゃないだけで基本的には技術本しか読まない.. もっといろんな本を読んだほうがいいんだろうなぁとも思うけど時間がもったいなく感じてしまうので技術本ばかりになる. もっとありそうだけどもう今年には無理だと思う"})]})}function bs(e={}){const{wrapper:t}=e.components||{};return t?h(t,{...e,children:h(nr,{...e})}):nr(e)}const zr=Object.freeze(Object.defineProperty({__proto__:null,default:bs,frontmatter:ws},Symbol.toStringTag,{value:"Module"})),_s={title:"blog 引越し",description:"ブログ引っ越し",date:"2025/03/02",published:!0};function sr(e){const t={h1:"h1",h3:"h3",li:"li",ul:"ul",...e.components};return h($e,{children:[h(t.h1,{children:"Hugo をやめてHono にした."}),`
`,h(t.ul,{children:[`
`,h(t.li,{children:"hugo を使っていたけどなんかコマンドなどが変わったのか追いかけるのが面倒くさくなったので,Hono をつかったテンプレートを作っていた方がいたのでそれをお借りした."}),`
`,h(t.li,{children:"気楽に上げられるように,また用途を絞らずに使おうと思ったのでTech をはずす予定.ただもちろん技術ネタがメインにはなると思っている."}),`
`,h(t.li,{children:"過去記事も一応持ってっこれるようにしたい."}),`
`,h(t.li,{children:"修正は基本全部AI にやらせて,前のブログみたいな色味にしている."}),`
`]}),`
`,h(t.h3,{children:"Claude すごいね. おわり"})]})}function xs(e={}){const{wrapper:t}=e.components||{};return t?h(t,{...e,children:h(sr,{...e})}):sr(e)}const Wr=Object.freeze(Object.defineProperty({__proto__:null,default:xs,frontmatter:_s},Symbol.toStringTag,{value:"Module"}));function Os(){return h($e,{children:h(Rs,{})})}const Rs=()=>{const t=Object.entries(Object.assign({"./posts/books_id_like_to_read.mdx":zr,"./posts/transfer_blog_template.mdx":Wr})).filter(([,r])=>r.frontmatter.published).sort(([,r],[,n])=>{const s=new Date(r.frontmatter.date);return new Date(n.frontmatter.date).getTime()-s.getTime()});return h("div",{class:"mt-16",children:h("ul",{class:"mt-10",children:t.map(([r,n])=>h("li",{class:"text-lg mt-2 md:mt-1",children:[h("span",{class:"tabular-nums tnum text-jade-dark",children:[n.frontmatter.date,":"," "]}),h("br",{class:"block md:hidden"}),h("a",{class:"text-jade underline",href:`${r.replace(/\.mdx$/,"")}`,children:n.frontmatter.title})]},r))})})},js=Object.freeze(Object.defineProperty({__proto__:null,default:Os},Symbol.toStringTag,{value:"Module"}));var ir=(e,t,r)=>(n,s)=>{let i=-1;return o(0);async function o(a){if(a<=i)throw new Error("next() called multiple times");i=a;let l,f=!1,u;if(e[a]?(u=e[a][0][0],n.req.routeIndex=a):u=a===e.length&&s||void 0,u)try{l=await u(n,()=>o(a+1))}catch(p){if(p instanceof Error&&t)n.error=p,l=await t(p,n),f=!0;else throw p}else n.finalized===!1&&r&&(l=await r(n));return l&&(n.finalized===!1||f)&&(n.res=l),n}},Ss=async(e,t=Object.create(null))=>{const{all:r=!1,dot:n=!1}=t,i=(e instanceof Zr?e.raw.headers:e.headers).get("Content-Type");return i!=null&&i.startsWith("multipart/form-data")||i!=null&&i.startsWith("application/x-www-form-urlencoded")?Ps(e,{all:r,dot:n}):{}};async function Ps(e,t){const r=await e.formData();return r?As(r,t):{}}function As(e,t){const r=Object.create(null);return e.forEach((n,s)=>{t.all||s.endsWith("[]")?ks(r,s,n):r[s]=n}),t.dot&&Object.entries(r).forEach(([n,s])=>{n.includes(".")&&(Cs(r,n,s),delete r[n])}),r}var ks=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:e[t]=r},Cs=(e,t,r)=>{let n=e;const s=t.split(".");s.forEach((i,o)=>{o===s.length-1?n[i]=r:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},qr=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},Ts=e=>{const{groups:t,path:r}=Ns(e),n=qr(r);return $s(n,t)},Ns=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{const s=`@${n}`;return t.push([s,r]),s}),{groups:t,path:e}},$s=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[n]=t[r];for(let s=e.length-1;s>=0;s--)if(e[s].includes(n)){e[s]=e[s].replace(n,t[r][1]);break}}return e},et={},or=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const n=`${e}#${t}`;return et[n]||(r[2]?et[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:et[n]=[e,r[1],!0]),et[n]}return null},Kr=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},Ms=e=>Kr(e,decodeURI),Xr=e=>{const t=e.url,r=t.indexOf("/",8);let n=r;for(;n<t.length;n++){const s=t.charCodeAt(n);if(s===37){const i=t.indexOf("?",n),o=t.slice(r,i===-1?void 0:i);return Ms(o.includes("%25")?o.replace(/%25/g,"%2525"):o)}else if(s===63)break}return t.slice(r,n)},Ds=e=>{const t=Xr(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},je=(e,t,...r)=>(r.length&&(t=je(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),Vr=e=>{if(!e.match(/\:.+\?$/))return null;const t=e.split("/"),r=[];let n="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))n+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){r.length===0&&n===""?r.push("/"):r.push(n);const i=s.replace("?","");n+="/"+i,r.push(n)}else n+="/"+s}),r.filter((s,i,o)=>o.indexOf(s)===i)},Ot=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Jr(e):e):e,Gr=(e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let o=e.indexOf(`?${t}`,8);for(o===-1&&(o=e.indexOf(`&${t}`,8));o!==-1;){const a=e.charCodeAt(o+t.length+1);if(a===61){const l=o+t.length+2,f=e.indexOf("&",l);return Ot(e.slice(l,f===-1?void 0:f))}else if(a==38||isNaN(a))return"";o=e.indexOf(`&${t}`,o+1)}if(n=/[%+]/.test(e),!n)return}const s={};n??(n=/[%+]/.test(e));let i=e.indexOf("?",8);for(;i!==-1;){const o=e.indexOf("&",i+1);let a=e.indexOf("=",i);a>o&&o!==-1&&(a=-1);let l=e.slice(i+1,a===-1?o===-1?void 0:o:a);if(n&&(l=Ot(l)),i=o,l==="")continue;let f;a===-1?f="":(f=e.slice(a+1,o===-1?void 0:o),n&&(f=Ot(f))),r?(s[l]&&Array.isArray(s[l])||(s[l]=[]),s[l].push(f)):s[l]??(s[l]=f)}return t?s[t]:s},Ls=Gr,Is=(e,t)=>Gr(e,t,!0),Jr=decodeURIComponent,ar=e=>Kr(e,Jr),Se,U,re,Qr,Yr,Mt,oe,ur,Zr=(ur=class{constructor(e,t="/",r=[[]]){O(this,re);w(this,"raw");O(this,Se);O(this,U);w(this,"routeIndex",0);w(this,"path");w(this,"bodyCache",{});O(this,oe,e=>{const{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;const s=Object.keys(t)[0];return s?t[s].then(i=>(s==="json"&&(i=JSON.stringify(i)),new Response(i)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,v(this,U,r),v(this,Se,{})}param(e){return e?j(this,re,Qr).call(this,e):j(this,re,Yr).call(this)}query(e){return Ls(this.url,e)}queries(e){return Is(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await Ss(this,e))}json(){return c(this,oe).call(this,"json")}text(){return c(this,oe).call(this,"text")}arrayBuffer(){return c(this,oe).call(this,"arrayBuffer")}blob(){return c(this,oe).call(this,"blob")}formData(){return c(this,oe).call(this,"formData")}addValidatedData(e,t){c(this,Se)[e]=t}valid(e){return c(this,Se)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return c(this,U)[0].map(([[,e]])=>e)}get routePath(){return c(this,U)[0].map(([[,e]])=>e)[this.routeIndex].path}},Se=new WeakMap,U=new WeakMap,re=new WeakSet,Qr=function(e){const t=c(this,U)[0][this.routeIndex][1][e],r=j(this,re,Mt).call(this,t);return r?/\%/.test(r)?ar(r):r:void 0},Yr=function(){const e={},t=Object.keys(c(this,U)[0][this.routeIndex][1]);for(const r of t){const n=j(this,re,Mt).call(this,c(this,U)[0][this.routeIndex][1][r]);n&&typeof n=="string"&&(e[r]=/\%/.test(n)?ar(n):n)}return e},Mt=function(e){return c(this,U)[1]?c(this,U)[1][e]:e},oe=new WeakMap,ur),Hs="text/plain; charset=UTF-8",Rt=(e,t={})=>{for(const r of Object.keys(t))e.set(r,t[r]);return e},ze,We,J,ye,Z,P,C,K,Q,qe,Pe,Ae,Ke,Xe,D,I,hr,Fs=(hr=class{constructor(e,t){O(this,D);O(this,ze);O(this,We);w(this,"env",{});O(this,J);w(this,"finalized",!1);w(this,"error");O(this,ye,200);O(this,Z);O(this,P);O(this,C);O(this,K);O(this,Q,!0);O(this,qe);O(this,Pe);O(this,Ae);O(this,Ke);O(this,Xe);w(this,"render",(...e)=>(c(this,Pe)??v(this,Pe,t=>this.html(t)),c(this,Pe).call(this,...e)));w(this,"setLayout",e=>v(this,qe,e));w(this,"getLayout",()=>c(this,qe));w(this,"setRenderer",e=>{v(this,Pe,e)});w(this,"header",(e,t,r)=>{if(t===void 0){c(this,P)?c(this,P).delete(e):c(this,C)&&delete c(this,C)[e.toLocaleLowerCase()],this.finalized&&this.res.headers.delete(e);return}r!=null&&r.append?(c(this,P)||(v(this,Q,!1),v(this,P,new Headers(c(this,C))),v(this,C,{})),c(this,P).append(e,t)):c(this,P)?c(this,P).set(e,t):(c(this,C)??v(this,C,{}),c(this,C)[e.toLowerCase()]=t),this.finalized&&(r!=null&&r.append?this.res.headers.append(e,t):this.res.headers.set(e,t))});w(this,"status",e=>{v(this,Q,!1),v(this,ye,e)});w(this,"set",(e,t)=>{c(this,J)??v(this,J,new Map),c(this,J).set(e,t)});w(this,"get",e=>c(this,J)?c(this,J).get(e):void 0);w(this,"newResponse",(...e)=>j(this,D,I).call(this,...e));w(this,"body",(e,t,r)=>typeof t=="number"?j(this,D,I).call(this,e,t,r):j(this,D,I).call(this,e,t));w(this,"text",(e,t,r)=>{if(!c(this,C)){if(c(this,Q)&&!r&&!t)return new Response(e);v(this,C,{})}return c(this,C)["content-type"]=Hs,typeof t=="number"?j(this,D,I).call(this,e,t,r):j(this,D,I).call(this,e,t)});w(this,"json",(e,t,r)=>{const n=JSON.stringify(e);return c(this,C)??v(this,C,{}),c(this,C)["content-type"]="application/json",typeof t=="number"?j(this,D,I).call(this,n,t,r):j(this,D,I).call(this,n,t)});w(this,"html",(e,t,r)=>(c(this,C)??v(this,C,{}),c(this,C)["content-type"]="text/html; charset=UTF-8",typeof e=="object"?Rr(e,_r.Stringify,!1,{}).then(n=>typeof t=="number"?j(this,D,I).call(this,n,t,r):j(this,D,I).call(this,n,t)):typeof t=="number"?j(this,D,I).call(this,e,t,r):j(this,D,I).call(this,e,t)));w(this,"redirect",(e,t)=>(c(this,P)??v(this,P,new Headers),c(this,P).set("Location",String(e)),this.newResponse(null,t??302)));w(this,"notFound",()=>(c(this,Ae)??v(this,Ae,()=>new Response),c(this,Ae).call(this,this)));v(this,ze,e),t&&(v(this,Z,t.executionCtx),this.env=t.env,v(this,Ae,t.notFoundHandler),v(this,Xe,t.path),v(this,Ke,t.matchResult))}get req(){return c(this,We)??v(this,We,new Zr(c(this,ze),c(this,Xe),c(this,Ke))),c(this,We)}get event(){if(c(this,Z)&&"respondWith"in c(this,Z))return c(this,Z);throw Error("This context has no FetchEvent")}get executionCtx(){if(c(this,Z))return c(this,Z);throw Error("This context has no ExecutionContext")}get res(){return v(this,Q,!1),c(this,K)||v(this,K,new Response("404 Not Found",{status:404}))}set res(e){if(v(this,Q,!1),c(this,K)&&e)try{for(const[t,r]of c(this,K).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const n=c(this,K).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of n)e.headers.append("set-cookie",s)}else e.headers.set(t,r)}catch(t){if(t instanceof TypeError&&t.message.includes("immutable")){this.res=new Response(e.body,{headers:e.headers,status:e.status});return}else throw t}v(this,K,e),this.finalized=!0}get var(){return c(this,J)?Object.fromEntries(c(this,J)):{}}},ze=new WeakMap,We=new WeakMap,J=new WeakMap,ye=new WeakMap,Z=new WeakMap,P=new WeakMap,C=new WeakMap,K=new WeakMap,Q=new WeakMap,qe=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,Ke=new WeakMap,Xe=new WeakMap,D=new WeakSet,I=function(e,t,r){if(c(this,Q)&&!r&&!t&&c(this,ye)===200)return new Response(e,{headers:c(this,C)});if(t&&typeof t!="number"){const s=new Headers(t.headers);c(this,P)&&c(this,P).forEach((o,a)=>{a==="set-cookie"?s.append(a,o):s.set(a,o)});const i=Rt(s,c(this,C));return new Response(e,{headers:i,status:t.status??c(this,ye)})}const n=typeof t=="number"?t:c(this,ye);c(this,C)??v(this,C,{}),c(this,P)??v(this,P,new Headers),Rt(c(this,P),c(this,C)),c(this,K)&&(c(this,K).headers.forEach((s,i)=>{var o,a;i==="set-cookie"?(o=c(this,P))==null||o.append(i,s):(a=c(this,P))==null||a.set(i,s)}),Rt(c(this,P),c(this,C))),r??(r={});for(const[s,i]of Object.entries(r))if(typeof i=="string")c(this,P).set(s,i);else{c(this,P).delete(s);for(const o of i)c(this,P).append(s,o)}return new Response(e,{status:n,headers:c(this,P)})},hr),T="ALL",Bs="all",Us=["get","post","put","delete","options","patch"],en="Can not add a route since the matcher is already built.",tn=class extends Error{},zs=e=>e.text("404 Not Found",404),lr=(e,t)=>"getResponse"in e?e.getResponse():(console.error(e),t.text("Internal Server Error",500)),z,N,nn,Y,me,ot,at,dr,rn=(dr=class{constructor(t={}){O(this,N);w(this,"get");w(this,"post");w(this,"put");w(this,"delete");w(this,"options");w(this,"patch");w(this,"all");w(this,"on");w(this,"use");w(this,"router");w(this,"getPath");w(this,"_basePath","/");O(this,z,"/");w(this,"routes",[]);O(this,Y,zs);w(this,"errorHandler",lr);w(this,"onError",t=>(this.errorHandler=t,this));w(this,"notFound",t=>(v(this,Y,t),this));w(this,"fetch",(t,...r)=>j(this,N,at).call(this,t,r[1],r[0],t.method));w(this,"request",(t,r,n,s)=>t instanceof Request?this.fetch(r?new Request(t,r):t,n,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${je("/",t)}`,r),n,s)));w(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(j(this,N,at).call(this,t.request,t,void 0,t.request.method))})});[...Us,Bs].forEach(s=>{this[s]=(i,...o)=>(typeof i=="string"?v(this,z,i):j(this,N,me).call(this,s,c(this,z),i),o.forEach(a=>{j(this,N,me).call(this,s,c(this,z),a)}),this)}),this.on=(s,i,...o)=>{for(const a of[i].flat()){v(this,z,a);for(const l of[s].flat())o.map(f=>{j(this,N,me).call(this,l.toUpperCase(),c(this,z),f)})}return this},this.use=(s,...i)=>(typeof s=="string"?v(this,z,s):(v(this,z,"*"),i.unshift(s)),i.forEach(o=>{j(this,N,me).call(this,T,c(this,z),o)}),this);const n=t.strict??!0;delete t.strict,Object.assign(this,t),this.getPath=n?t.getPath??Xr:Ds}route(t,r){const n=this.basePath(t);return r.routes.map(s=>{var o;let i;r.errorHandler===lr?i=s.handler:(i=async(a,l)=>(await ir([],r.errorHandler)(a,()=>s.handler(a,l))).res,i[St]=s.handler),j(o=n,N,me).call(o,s.method,s.path,i)}),this}basePath(t){const r=j(this,N,nn).call(this);return r._basePath=je(this._basePath,t),r}mount(t,r,n){let s,i;n&&(typeof n=="function"?i=n:(i=n.optionHandler,s=n.replaceRequest));const o=i?l=>{const f=i(l);return Array.isArray(f)?f:[f]}:l=>{let f;try{f=l.executionCtx}catch{}return[l.env,f]};s||(s=(()=>{const l=je(this._basePath,t),f=l==="/"?0:l.length;return u=>{const p=new URL(u.url);return p.pathname=p.pathname.slice(f)||"/",new Request(p,u)}})());const a=async(l,f)=>{const u=await r(s(l.req.raw),...o(l));if(u)return u;await f()};return j(this,N,me).call(this,T,je(t,"*"),a),this}},z=new WeakMap,N=new WeakSet,nn=function(){const t=new rn({router:this.router,getPath:this.getPath});return t.routes=this.routes,t},Y=new WeakMap,me=function(t,r,n){t=t.toUpperCase(),r=je(this._basePath,r);const s={path:r,method:t,handler:n};this.router.add(t,r,[n,s]),this.routes.push(s)},ot=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},at=function(t,r,n,s){if(s==="HEAD")return(async()=>new Response(null,await j(this,N,at).call(this,t,r,n,"GET")))();const i=this.getPath(t,{env:n}),o=this.router.match(s,i),a=new Fs(t,{path:i,matchResult:o,env:n,executionCtx:r,notFoundHandler:c(this,Y)});if(o[0].length===1){let f;try{f=o[0][0][0][0](a,async()=>{a.res=await c(this,Y).call(this,a)})}catch(u){return j(this,N,ot).call(this,u,a)}return f instanceof Promise?f.then(u=>u||(a.finalized?a.res:c(this,Y).call(this,a))).catch(u=>j(this,N,ot).call(this,u,a)):f??c(this,Y).call(this,a)}const l=ir(o[0],this.errorHandler,c(this,Y));return(async()=>{try{const f=await l(a);if(!f.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return f.res}catch(f){return j(this,N,ot).call(this,f,a)}})()},dr),ht="[^/]+",Ie=".*",He="(?:|/.*)",Le=Symbol(),Ws=new Set(".\\+*[^]$()");function qs(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Ie||e===He?1:t===Ie||t===He?-1:e===ht?1:t===ht?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var Ee,we,W,pr,Dt=(pr=class{constructor(){O(this,Ee);O(this,we);O(this,W,Object.create(null))}insert(t,r,n,s,i){if(t.length===0){if(c(this,Ee)!==void 0)throw Le;if(i)return;v(this,Ee,r);return}const[o,...a]=t,l=o==="*"?a.length===0?["","",Ie]:["","",ht]:o==="/*"?["","",He]:o.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let f;if(l){const u=l[1];let p=l[2]||ht;if(u&&l[2]&&(p=p.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(p)))throw Le;if(f=c(this,W)[p],!f){if(Object.keys(c(this,W)).some(d=>d!==Ie&&d!==He))throw Le;if(i)return;f=c(this,W)[p]=new Dt,u!==""&&v(f,we,s.varIndex++)}!i&&u!==""&&n.push([u,c(f,we)])}else if(f=c(this,W)[o],!f){if(Object.keys(c(this,W)).some(u=>u.length>1&&u!==Ie&&u!==He))throw Le;if(i)return;f=c(this,W)[o]=new Dt}f.insert(a,r,n,s,i)}buildRegExpStr(){const r=Object.keys(c(this,W)).sort(qs).map(n=>{const s=c(this,W)[n];return(typeof c(s,we)=="number"?`(${n})@${c(s,we)}`:Ws.has(n)?`\\${n}`:n)+s.buildRegExpStr()});return typeof c(this,Ee)=="number"&&r.unshift(`#${c(this,Ee)}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}},Ee=new WeakMap,we=new WeakMap,W=new WeakMap,pr),dt,Ve,gr,Ks=(gr=class{constructor(){O(this,dt,{varIndex:0});O(this,Ve,new Dt)}insert(e,t,r){const n=[],s=[];for(let o=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,l=>{const f=`@\\${o}`;return s[o]=[f,l],o++,a=!0,f}),!a)break}const i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let o=s.length-1;o>=0;o--){const[a]=s[o];for(let l=i.length-1;l>=0;l--)if(i[l].indexOf(a)!==-1){i[l]=i[l].replace(a,s[o][1]);break}}return c(this,Ve).insert(i,t,n,c(this,dt),r),n}buildRegExp(){let e=c(this,Ve).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,i,o)=>i!==void 0?(r[++t]=Number(i),"$()"):(o!==void 0&&(n[Number(o)]=++t),"")),[new RegExp(`^${e}`),r,n]}},dt=new WeakMap,Ve=new WeakMap,gr),sn=[],Xs=[/^$/,[],Object.create(null)],lt=Object.create(null);function on(e){return lt[e]??(lt[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function Vs(){lt=Object.create(null)}function Gs(e){var f;const t=new Ks,r=[];if(e.length===0)return Xs;const n=e.map(u=>[!/\*|\/:/.test(u[0]),...u]).sort(([u,p],[d,m])=>u?1:d?-1:p.length-m.length),s=Object.create(null);for(let u=0,p=-1,d=n.length;u<d;u++){const[m,b,g]=n[u];m?s[b]=[g.map(([E])=>[E,Object.create(null)]),sn]:p++;let y;try{y=t.insert(b,p,m)}catch(E){throw E===Le?new tn(b):E}m||(r[p]=g.map(([E,_])=>{const x=Object.create(null);for(_-=1;_>=0;_--){const[R,S]=y[_];x[R]=S}return[E,x]}))}const[i,o,a]=t.buildRegExp();for(let u=0,p=r.length;u<p;u++)for(let d=0,m=r[u].length;d<m;d++){const b=(f=r[u][d])==null?void 0:f[1];if(!b)continue;const g=Object.keys(b);for(let y=0,E=g.length;y<E;y++)b[g[y]]=a[b[g[y]]]}const l=[];for(const u in o)l[u]=r[o[u]];return[i,l,s]}function Re(e,t){if(e){for(const r of Object.keys(e).sort((n,s)=>s.length-n.length))if(on(r).test(t))return[...e[r]]}}var ae,le,Ne,an,ln,mr,Js=(mr=class{constructor(){O(this,Ne);w(this,"name","RegExpRouter");O(this,ae);O(this,le);v(this,ae,{[T]:Object.create(null)}),v(this,le,{[T]:Object.create(null)})}add(e,t,r){var a;const n=c(this,ae),s=c(this,le);if(!n||!s)throw new Error(en);n[e]||[n,s].forEach(l=>{l[e]=Object.create(null),Object.keys(l[T]).forEach(f=>{l[e][f]=[...l[T][f]]})}),t==="/*"&&(t="*");const i=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const l=on(t);e===T?Object.keys(n).forEach(f=>{var u;(u=n[f])[t]||(u[t]=Re(n[f],t)||Re(n[T],t)||[])}):(a=n[e])[t]||(a[t]=Re(n[e],t)||Re(n[T],t)||[]),Object.keys(n).forEach(f=>{(e===T||e===f)&&Object.keys(n[f]).forEach(u=>{l.test(u)&&n[f][u].push([r,i])})}),Object.keys(s).forEach(f=>{(e===T||e===f)&&Object.keys(s[f]).forEach(u=>l.test(u)&&s[f][u].push([r,i]))});return}const o=Vr(t)||[t];for(let l=0,f=o.length;l<f;l++){const u=o[l];Object.keys(s).forEach(p=>{var d;(e===T||e===p)&&((d=s[p])[u]||(d[u]=[...Re(n[p],u)||Re(n[T],u)||[]]),s[p][u].push([r,i-f+l+1]))})}}match(e,t){Vs();const r=j(this,Ne,an).call(this);return this.match=(n,s)=>{const i=r[n]||r[T],o=i[2][s];if(o)return o;const a=s.match(i[0]);if(!a)return[[],sn];const l=a.indexOf("",1);return[i[1][l],a]},this.match(e,t)}},ae=new WeakMap,le=new WeakMap,Ne=new WeakSet,an=function(){const e=Object.create(null);return Object.keys(c(this,le)).concat(Object.keys(c(this,ae))).forEach(t=>{e[t]||(e[t]=j(this,Ne,ln).call(this,t))}),v(this,ae,v(this,le,void 0)),e},ln=function(e){const t=[];let r=e===T;return[c(this,ae),c(this,le)].forEach(n=>{const s=n[e]?Object.keys(n[e]).map(i=>[i,n[e][i]]):[];s.length!==0?(r||(r=!0),t.push(...s)):e!==T&&t.push(...Object.keys(n[T]).map(i=>[i,n[T][i]]))}),r?Gs(t):null},mr),ce,ee,vr,Zs=(vr=class{constructor(e){w(this,"name","SmartRouter");O(this,ce,[]);O(this,ee,[]);v(this,ce,e.routers)}add(e,t,r){if(!c(this,ee))throw new Error(en);c(this,ee).push([e,t,r])}match(e,t){if(!c(this,ee))throw new Error("Fatal error");const r=c(this,ce),n=c(this,ee),s=r.length;let i=0,o;for(;i<s;i++){const a=r[i];try{for(let l=0,f=n.length;l<f;l++)a.add(...n[l]);o=a.match(e,t)}catch(l){if(l instanceof tn)continue;throw l}this.match=a.match.bind(a),v(this,ce,[a]),v(this,ee,void 0);break}if(i===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,o}get activeRouter(){if(c(this,ee)||c(this,ce).length!==1)throw new Error("No active router has been determined yet.");return c(this,ce)[0]}},ce=new WeakMap,ee=new WeakMap,vr),Me=Object.create(null),fe,M,be,ke,$,te,ve,yr,cn=(yr=class{constructor(e,t,r){O(this,te);O(this,fe);O(this,M);O(this,be);O(this,ke,0);O(this,$,Me);if(v(this,M,r||Object.create(null)),v(this,fe,[]),e&&t){const n=Object.create(null);n[e]={handler:t,possibleKeys:[],score:0},v(this,fe,[n])}v(this,be,[])}insert(e,t,r){v(this,ke,++Wt(this,ke)._);let n=this;const s=Ts(t),i=[];for(let l=0,f=s.length;l<f;l++){const u=s[l],p=s[l+1],d=or(u,p),m=Array.isArray(d)?d[0]:u;if(Object.keys(c(n,M)).includes(m)){n=c(n,M)[m];const b=or(u,p);b&&i.push(b[1]);continue}c(n,M)[m]=new cn,d&&(c(n,be).push(d),i.push(d[1])),n=c(n,M)[m]}const o=Object.create(null),a={handler:r,possibleKeys:i.filter((l,f,u)=>u.indexOf(l)===f),score:c(this,ke)};return o[e]=a,c(n,fe).push(o),n}search(e,t){var a;const r=[];v(this,$,Me);let s=[this];const i=qr(t),o=[];for(let l=0,f=i.length;l<f;l++){const u=i[l],p=l===f-1,d=[];for(let m=0,b=s.length;m<b;m++){const g=s[m],y=c(g,M)[u];y&&(v(y,$,c(g,$)),p?(c(y,M)["*"]&&r.push(...j(this,te,ve).call(this,c(y,M)["*"],e,c(g,$))),r.push(...j(this,te,ve).call(this,y,e,c(g,$)))):d.push(y));for(let E=0,_=c(g,be).length;E<_;E++){const x=c(g,be)[E],R=c(g,$)===Me?{}:{...c(g,$)};if(x==="*"){const k=c(g,M)["*"];k&&(r.push(...j(this,te,ve).call(this,k,e,c(g,$))),v(k,$,R),d.push(k));continue}if(u==="")continue;const[S,F,X]=x,B=c(g,M)[S],L=i.slice(l).join("/");if(X instanceof RegExp){const k=X.exec(L);if(k){if(R[F]=k[0],r.push(...j(this,te,ve).call(this,B,e,c(g,$),R)),Object.keys(c(B,M)).length){v(B,$,R);const de=((a=k[0].match(/\//))==null?void 0:a.length)??0;(o[de]||(o[de]=[])).push(B)}continue}}(X===!0||X.test(u))&&(R[F]=u,p?(r.push(...j(this,te,ve).call(this,B,e,R,c(g,$))),c(B,M)["*"]&&r.push(...j(this,te,ve).call(this,c(B,M)["*"],e,R,c(g,$)))):(v(B,$,R),d.push(B)))}}s=d.concat(o.shift()??[])}return r.length>1&&r.sort((l,f)=>l.score-f.score),[r.map(({handler:l,params:f})=>[l,f])]}},fe=new WeakMap,M=new WeakMap,be=new WeakMap,ke=new WeakMap,$=new WeakMap,te=new WeakSet,ve=function(e,t,r,n){const s=[];for(let i=0,o=c(e,fe).length;i<o;i++){const a=c(e,fe)[i],l=a[t]||a[T],f={};if(l!==void 0&&(l.params=Object.create(null),s.push(l),r!==Me||n&&n!==Me))for(let u=0,p=l.possibleKeys.length;u<p;u++){const d=l.possibleKeys[u],m=f[l.score];l.params[d]=n!=null&&n[d]&&!m?n[d]:r[d]??(n==null?void 0:n[d]),f[l.score]=!0}}return s},yr),_e,Er,Qs=(Er=class{constructor(){w(this,"name","TrieRouter");O(this,_e);v(this,_e,new cn)}add(e,t,r){const n=Vr(t);if(n){for(let s=0,i=n.length;s<i;s++)c(this,_e).insert(e,n[s],r);return}c(this,_e).insert(e,t,r)}match(e,t){return c(this,_e).search(e,t)}},_e=new WeakMap,Er),ct=class extends rn{constructor(e={}){super(e),this.router=e.router??new Zs({routers:[new Js,new Qs]})}},Ys=e=>e;const fn=new mn,cr=e=>(e=e.replace(/\.tsx?$/g,"").replace(/\.mdx?$/g,"").replace(/^\/?index$/,"/").replace(/\/index$/,"").replace(/\[\.{3}.+\]/,"*").replace(/\[(.+?)\]/g,":$1"),/^\//.test(e)?e:"/"+e),jt=e=>{const t={};for(const[r,n]of Object.entries(e)){const s=r.split("/"),i=s.pop(),o=s.join("/");t[o]||(t[o]={}),i&&(t[o][i]=n)}for(const[r,n]of Object.entries(t)){const s=Object.entries(n).sort(([i],[o])=>i[0]==="["&&o[0]!=="["?1:i[0]!=="["&&o[0]==="["?-1:i.localeCompare(o));t[r]=Object.fromEntries(s)}return t},ei=e=>Object.keys(e).sort((r,n)=>{const s=r.split("/").length,i=n.split("/").length;return s-i||n.localeCompare(r)}).map(r=>({[r]:e[r]})),ti=e=>{const t={};for(const n of Object.keys(e)){const s=n.split("/");s.pop();const i=s.join("/");t[i]||(t[i]=[]),t[i].includes(n)||t[i].push(n)}const r=Object.keys(t).sort((n,s)=>s.length-n.length);for(const n of r)for(const s of r)if(s.startsWith(n)&&s!==n){const i=new Set([...t[s],...t[n]]);t[s]=[...i]}return t},ri="_404.tsx",ni="_error.tsx",si=["GET","POST","PUT","DELETE","OPTIONS","PATCH"],ii=e=>{const t=e.root,r=new RegExp(`^${t}`),n=y=>cr(y.replace(r,"")),s=new ct;s.use(async function(E,_){await fn.run(E,()=>_())});const i=e.NOT_FOUND,o=jt(i),a=e.ERROR,l=jt(a),f=e.RENDERER,u=ti(f),p=e.MIDDLEWARE,d=e.ROUTES,m=ei(jt(d)),b=(y,E)=>{let _=E[y]??[];const x=S=>(_=E[S.join("/")],_||(S.pop(),S.length&&x(S)),_??[]),R=y.split("/");return _=x(R),_.sort((S,F)=>S.split("/").length-F.split("/").length),_},g={};for(const y of m)for(const[E,_]of Object.entries(y)){const x=new ct;let R=!1;b(E,u).map(L=>{const k=f[L];k[he]&&(R=!0);const ne=k.default;ne&&x.all("*",ne)});const F=Object.keys(p).find(L=>{const k=E.replaceAll("[","\\[").replace("]","\\]");return new RegExp(k+"/_middleware.tsx?").test(L)});if(F){const L=p[F];L.default&&x.use(...L.default)}for(const[L,k]of Object.entries(_)){const de=k[he],ne=Ys(async function(ie,dn){ie.set(he,de?!0:R),await dn()}),se=k.default,pe=cr(L);se&&"fetch"in se&&(x.use(ne),x.route(pe,se));for(const ge of si){const ie=k[ge];ie&&(x.on(ge,pe,ne),x.on(ge,pe,...ie))}se&&Array.isArray(se)&&(x.get(pe,ne),x.get(pe,...se)),typeof se=="function"&&(x.get(pe,ne),x.get(pe,async ge=>{const ie=await se(ge);return ie instanceof Response?ie:ge.render(ie,k)}))}const X=ai(E,l);X&&(g[E]=X);for(const[L,k]of Object.entries(g))new RegExp(`^${L}`).test(E)&&k&&x.onError(k);let B=n(E);s.route(B,x)}for(const y of m.reverse()){const E=Object.entries(y)[0][0],_=new ct;oi(_,E,o);const x=n(E);s.route(x,_)}return s};function oi(e,t,r){for(const[n,s]of Object.entries(r))if(t===n){const i=s[ri];if(i){const o=i.default;i[he]&&e.use("*",(l,f)=>(l.set(he,!0),f())),e.get("*",l=>(l.status(404),o(l)))}}}function ai(e,t){for(const[r,n]of Object.entries(t))if(e===r){const s=n[ni];if(s){const i=s.default;if(i)return async(a,l)=>{const f=s[he];return f&&l.set(he,f),l.status(500),i(a,l)}}}}const li=e=>ii({root:"/app/routes",NOT_FOUND:Object.assign({}),ERROR:Object.assign({}),RENDERER:Object.assign({"/app/routes/_renderer.tsx":cs,"/app/routes/posts/_renderer.tsx":Es}),MIDDLEWARE:Object.assign({}),ROUTES:Object.assign({"/app/routes/index.tsx":js,"/app/routes/posts/books_id_like_to_read.mdx":zr,"/app/routes/posts/transfer_blog_template.mdx":Wr})}),ci=({children:e})=>{const t=fn.getStore();if(!t)throw new Error("No context found");return h($e,{children:t.get(he)&&e})},fi={"app/client.ts":{file:"static/client-DNrR7D2B.js",name:"client",src:"app/client.ts",isEntry:!0,dynamicImports:["app/islands/ShareButton.tsx","node_modules/honox/dist/client/runtime.js","node_modules/honox/dist/client/runtime.js"]},"app/islands/ShareButton.tsx":{file:"static/ShareButton-C9G0UybX.js",name:"ShareButton",src:"app/islands/ShareButton.tsx",isDynamicEntry:!0,imports:["app/client.ts"]},"app/style.css":{file:"static/assets/style.css",src:"app/style.css",isEntry:!0},"node_modules/honox/dist/client/runtime.js":{file:"static/runtime-CC6x0Qm5.js",name:"runtime",src:"node_modules/honox/dist/client/runtime.js",isDynamicEntry:!0,imports:["app/client.ts"]}},ui=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"})),hi=e=>e.endsWith("/")?e:e+"/",di=e=>{const t=e.src;if(e.prod??!0){let r=e.manifest;if(!r){const n=Object.assign({"/dist/.vite/manifest.json":ui});for(const[,s]of Object.entries(n))if(s.default){r=s.default;break}}if(r){const n=r[t.replace(/^\//,"")];if(n)return h(ci,{children:h("script",{type:"module",async:!!e.async,src:`${hi("/")}${n.file}`,nonce:e.nonce})})}return h($e,{})}else return h("script",{type:"module",async:!!e.async,src:t,nonce:e.nonce})},un=li();wn(un);const fr=new ct,pi=Object.assign({"/app/server.ts":un});let hn=!1;for(const[,e]of Object.entries(pi))e&&(fr.route("/",e),fr.notFound(e.notFoundHandler),hn=!0);if(!hn)throw new Error("Can't import modules from ['/src/index.tsx','/app/server.ts']");export{fr as default};
